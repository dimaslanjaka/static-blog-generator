#!/usr/bin/env bash

#sh -c 'rm -rf node_modules/a* & wait'

# make cygwin bin as priority
export PATH="/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:$PATH";

[[ -d "yarn.lock" ]] && rm -rf yarn.lock &
[[ -d "package-lock.json" ]] && rm -rf package-lock.json &
[[ -d "node_modules/@*" ]] && rm -rf node_modules/@* &
[[ -d "node_modules/.*" ]] && rm -rf node_modules/.* &
[[ -d "node_modules" ]] && rm -rf node_modules &
rm -rf packages/**/node_modules &
rm -rf packages/**/tmp &

vowels=( a i u e o A I U E O )
for letter in {{a..z},{A..Z}}; do
    for vowel in "${vowels[@]}"; do
      withoutVowel="node_modules/${letter}${vowel}*"
      withVowel="node_modules/${letter}${vowel}*"
      if [[ -d $withVowel ]];
      then
        echo "deleting ${withVowel}"
        rm -rf $withVowel &
      fi
      if [[ -d $withoutVowel ]];
      then
        echo "deleting ${withoutVowel}"
        rm -rf $withoutVowel &
      fi
    done
done

find . -name "tmp" -exec rm -rf '{}' + &
find . -name "node_modules" -exec rm -rf '{}' + &
find . -name "yarn.lock" -exec rm -rf '{}' + &
find . -name "package-lock.json" -exec rm -rf '{}' + &

wait